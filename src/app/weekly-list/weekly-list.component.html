<div class="week-list-wrapper" *ngIf="weekBuilt">
  <div class="week-list-row" *ngFor="let year of years">
    <div class="year-index" [ngClass]="{currentYear:year.isTheCurrentYear}"> {{year.index}}</div>

    <div class="week-list-item" [ngClass]="{currentWeek:week.isCurrentWeek,weekBeforeCurrent:week.isBeforeCurrent,weekWithPeriod:week.periods?.length}"
      *ngFor="let week of year.weeks; let i = index" data-placement="{{i < 41 ? 'bottom':'left'}}" [ngStyle]="{'background-color': week.periods[0]?.color}"
      data-toggle="tooltip" data-html="true" data-trigger="hover" [ngbTooltip]="weekTooltip" ngbTooltip="Tooltip on {{i < 41 ? 'bottom':'left'}}"
      container="body">


      <ng-template #weekTooltip>
        <div class="week-tooltip">
          <div class="week-tooltip-title" [ngClass]="{weekWithPeriodTooltip:week.periods?.length}">Week: {{week.dateFromSt}} to {{week.dateToSt}}</div>
          <table class="week-tooltip-table">
            <thead>
              <tr class="week-tooltip-table-row">
                <th>Start</th>
                <th></th>
                <th>End</th>
                <th>Name</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let period of week.periods" class="week-tooltip-table-row">
                <td>{{period.dateFromSt}}</td>
                <td></td>
                <td>{{period.dateToSt}}</td>
                <td>{{period.name}}</td>
              </tr>
            </tbody>
          </table>
        </div>
      </ng-template>

      <!-- <div class="period" *ngFor="let color of week.colors" > </div> -->
      {{week.index}}
    </div>
  </div>
</div>

<app-period-edit></app-period-edit>

<hr class="great-divider">
<a href="#" class=" btn-add" data-toggle="modal" data-target="#periodModal">+</a>
<!--<a href="#" class=" btn-add" data-toggle="modal" data-target="#settingsdModal">+</a>-->